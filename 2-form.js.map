{"version":3,"file":"2-form.js","sources":["../src/js/form.js"],"sourcesContent":["import 'animate.css';\nimport isEmail from 'validator/es/lib/isEmail';\nimport emailjs from '@emailjs/browser';\nemailjs.init(\"hQcP3rVr7NWYFyrR0\");\n\n//GLOBAL\nconst form = document.querySelector('.feedback-form');\nconst emailInput = document.querySelector('input');\nconst messageInput = document.querySelector('textarea');\nlet formData = {\n    email: '',\n    message: ''\n};\nlet localStorageData = {};\n\n//FUNCNION TRACKS AND ADD INPUT VALUES TO STORAGE + FORMDATA\nlet handleInput = event => {\n    formData[event.target.name] = event.target.value.trim();\n    localStorage.setItem(\"feedback-form-state\", JSON.stringify(formData));\n};\nemailInput.addEventListener('input', handleInput);\nmessageInput.addEventListener('input', handleInput);\n\n//ADDS VALUES FROM STORAGE TO FORM\nif (localStorage.getItem(\"feedback-form-state\") !== null) {\n    try {\n        localStorageData = JSON.parse(localStorage.getItem(\"feedback-form-state\"));\n    }\n    catch (error) {\n        console.error('Error name:', error.name);\n        console.error('Error message:', error.message);\n    }\n        formData = { ...formData, ...localStorageData };\n        emailInput.value = formData[emailInput.name] || '';\n        messageInput.value = formData[messageInput.name] || '';\n    }\n\n//ALERT MESSAGE \nfunction showAlert(alertDscr) {\n    const alert = document.querySelector('.toast');\n    alert.classList.add('show');\n    alert.textContent = alertDscr;\n    setTimeout(() => alert.classList.remove('show'), 3000);\n}\n\n//BTN SEND FORM OPTIONS AFTER CLICK\nfunction sendBttnOptions() {\n    \n    const letterImg = document.querySelector('.letter-img');\n\n    form.addEventListener('submit', event => {\n        event.preventDefault();\n\n        let { email, message } = formData;\n\n        //VALIDATE EMAIL\n        if (!isEmail(email)) {\n            showAlert(\"It's not email\");\n            return;\n        }\n        if (message.trim() === '') {\n            showAlert(\"Wright something\");\n            return;\n        }\n        //SENDING FORM TO EMAIL\n        emailjs.sendForm(\"service_scmlcpr\", \"template_7iwitgm\", form)\n            .then(() => {\n                showAlert(\"Message sent successfully!\");\n\n                //ANIMATION SEND LETTER\n                letterImg.src = \"/goit-js-hw-09/img/closed-lttr.png\";\n                letterImg.classList.add('letter-animation');\n                setTimeout(() => {\n                    letterImg.src = \"/goit-js-hw-09/img/mail_10345769.png\";\n                    letterImg.classList.remove('letter-animation')\n                }, 1000);\n                //CLEAR LOCAL STORAGE & FORMDATA\n                console.log(formData);\n                localStorage.removeItem(\"feedback-form-state\");\n                Object.keys(formData).forEach(key => formData[key] = '')\n                emailInput.value = formData[emailInput.name];\n                messageInput.value = formData[messageInput.name];\n            })\n            .catch(() => {\n                console.error(\"Email sending failed:\", error);\n                showAlert(\"Error sending message.\");\n            });\n    })\n}\nsendBttnOptions()\n"],"names":["emailjs","form","emailInput","messageInput","formData","localStorageData","handleInput","event","error","showAlert","alertDscr","alert","sendBttnOptions","letterImg","email","message","isEmail","key"],"mappings":"2FAGAA,EAAQ,KAAK,mBAAmB,EAGhC,MAAMC,EAAO,SAAS,cAAc,gBAAgB,EAC9CC,EAAa,SAAS,cAAc,OAAO,EAC3CC,EAAe,SAAS,cAAc,UAAU,EACtD,IAAIC,EAAW,CACX,MAAO,GACP,QAAS,EACb,EACIC,EAAmB,CAAA,EAGnBC,EAAcC,GAAS,CACvBH,EAASG,EAAM,OAAO,IAAI,EAAIA,EAAM,OAAO,MAAM,OACjD,aAAa,QAAQ,sBAAuB,KAAK,UAAUH,CAAQ,CAAC,CACxE,EACAF,EAAW,iBAAiB,QAASI,CAAW,EAChDH,EAAa,iBAAiB,QAASG,CAAW,EAGlD,GAAI,aAAa,QAAQ,qBAAqB,IAAM,KAAM,CACtD,GAAI,CACAD,EAAmB,KAAK,MAAM,aAAa,QAAQ,qBAAqB,CAAC,CAC5E,OACMG,EAAO,CACV,QAAQ,MAAM,cAAeA,EAAM,IAAI,EACvC,QAAQ,MAAM,iBAAkBA,EAAM,OAAO,CAChD,CACGJ,EAAW,CAAE,GAAGA,EAAU,GAAGC,CAAgB,EAC7CH,EAAW,MAAQE,EAASF,EAAW,IAAI,GAAK,GAChDC,EAAa,MAAQC,EAASD,EAAa,IAAI,GAAK,EACvD,CAGL,SAASM,EAAUC,EAAW,CAC1B,MAAMC,EAAQ,SAAS,cAAc,QAAQ,EAC7CA,EAAM,UAAU,IAAI,MAAM,EAC1BA,EAAM,YAAcD,EACpB,WAAW,IAAMC,EAAM,UAAU,OAAO,MAAM,EAAG,GAAI,CACzD,CAGA,SAASC,GAAkB,CAEvB,MAAMC,EAAY,SAAS,cAAc,aAAa,EAEtDZ,EAAK,iBAAiB,SAAUM,GAAS,CACrCA,EAAM,eAAc,EAEpB,GAAI,CAAE,MAAAO,EAAO,QAAAC,CAAS,EAAGX,EAGzB,GAAI,CAACY,EAAQF,CAAK,EAAG,CACjBL,EAAU,gBAAgB,EAC1B,MACH,CACD,GAAIM,EAAQ,KAAM,IAAK,GAAI,CACvBN,EAAU,kBAAkB,EAC5B,MACH,CAEDT,EAAQ,SAAS,kBAAmB,mBAAoBC,CAAI,EACvD,KAAK,IAAM,CACRQ,EAAU,4BAA4B,EAGtCI,EAAU,IAAM,qCAChBA,EAAU,UAAU,IAAI,kBAAkB,EAC1C,WAAW,IAAM,CACbA,EAAU,IAAM,uCAChBA,EAAU,UAAU,OAAO,kBAAkB,CAChD,EAAE,GAAI,EAEP,QAAQ,IAAIT,CAAQ,EACpB,aAAa,WAAW,qBAAqB,EAC7C,OAAO,KAAKA,CAAQ,EAAE,QAAQa,GAAOb,EAASa,CAAG,EAAI,EAAE,EACvDf,EAAW,MAAQE,EAASF,EAAW,IAAI,EAC3CC,EAAa,MAAQC,EAASD,EAAa,IAAI,CAC/D,CAAa,EACA,MAAM,IAAM,CACT,QAAQ,MAAM,wBAAyB,KAAK,EAC5CM,EAAU,wBAAwB,CAClD,CAAa,CACb,CAAK,CACL,CACAG,EAAe"}