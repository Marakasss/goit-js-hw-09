{"version":3,"file":"2-form.js","sources":["../src/js/form.js"],"sourcesContent":["import 'animate.css';\nimport isEmail from 'validator/es/lib/isEmail';\nimport emailjs from '@emailjs/browser';\nemailjs.init(\"hQcP3rVr7NWYFyrR0\");\n\n//GLOBAL\nconst form = document.querySelector('.feedback-form');\nlet formData = {\n    email: '',\n    message: ''\n};\n\n\n//FUNCNION TRACKS AND ADD INPUT VALUES TO STORAGE + FORMDATA\nlet handleInput = event => {\n    formData[event.target.name] = event.target.value.trim();\n    localStorage.setItem(\"feedback-form-state\", JSON.stringify(formData));\n\n    //valid email change input color\n    if (event.target.name === 'email') {\n        if (isEmail(event.target.value)) {\n            event.target.style.backgroundColor = 'rgb(225, 225, 225)';\n        } else {\n            event.target.style.backgroundColor = 'rgb(206, 206, 209)';\n        }\n    }\n    if (event.target.name === 'message') {\n        if (event.target.value.trim() !== \"\") {\n            event.target.style.backgroundColor = 'rgb(225, 225, 225)';\n        } else {\n            event.target.style.backgroundColor = 'rgb(206, 206, 209)';\n        }\n    }\n};\nform.addEventListener('input', handleInput);\n\n\n//ADDS VALUES FROM STORAGE TO FORM\nif (localStorage.getItem(\"feedback-form-state\") !== null) {\n    let localStorageData = {};\n    try {\n        localStorageData = JSON.parse(localStorage.getItem(\"feedback-form-state\"));\n    }\n    catch (error) {\n        console.error('Error name:', error.name);\n        console.error('Error message:', error.message);\n    }\n    formData = { ...formData, ...localStorageData };\n    form.elements.email.value = formData.email || '';\n    form.elements.message.value = formData.message || '';\n}\n\n\n//ALERT MESSAGE \nfunction showAlert(alertDscr) {\n    const alert = document.querySelector('.toast');\n    alert.classList.add('show');\n    alert.textContent = alertDscr;\n    setTimeout(() => alert.classList.remove('show'), 3000);\n}\n\n\n//FORM BTN OPTIONS AFTER CLICK\nfunction formSubmit() {\n\n    const letterImg = document.querySelector('.letter-img');\n\n    form.addEventListener('submit', event => {\n        event.preventDefault();\n\n        let { email, message } = formData;\n\n        //VALIDATE EMAIL\n        if (!isEmail(email)) {\n            showAlert(\"It's not email\");\n            return;\n        }\n        if (message.trim() === '') {\n            showAlert(\"Wright something\");\n            return;\n        }\n        //SENDING FORM TO EMAIL\n        emailjs.sendForm(\"service_scmlcpr\", \"template_7iwitgm\", form)\n            .then(() => {\n                showAlert(\"Message sent successfully!\");\n\n                //ANIMATION SEND LETTER\n                letterImg.src = \"/goit-js-hw-09/img/closed-lttr.png\";\n                letterImg.classList.add('letter-animation');\n                setTimeout(() => {\n                    letterImg.src = \"/goit-js-hw-09/img/mail_10345769.png\";\n                    letterImg.classList.remove('letter-animation')\n                }, 1000);\n                //CLEAR LOCAL STORAGE & FORMDATA\n                console.log(formData);\n                localStorage.removeItem(\"feedback-form-state\");\n                Object.keys(formData).forEach(key => formData[key] = '');\n                form.reset();\n            })\n            .catch(() => {\n                console.error(\"Email sending failed:\", error);\n                showAlert(\"Error sending message.\");\n            });\n    })\n}\nformSubmit()\n"],"names":["emailjs","form","formData","handleInput","event","isEmail","localStorageData","error","showAlert","alertDscr","alert","formSubmit","letterImg","email","message","key"],"mappings":"2FAGAA,EAAQ,KAAK,mBAAmB,EAGhC,MAAMC,EAAO,SAAS,cAAc,gBAAgB,EACpD,IAAIC,EAAW,CACX,MAAO,GACP,QAAS,EACb,EAIIC,EAAcC,GAAS,CACvBF,EAASE,EAAM,OAAO,IAAI,EAAIA,EAAM,OAAO,MAAM,OACjD,aAAa,QAAQ,sBAAuB,KAAK,UAAUF,CAAQ,CAAC,EAGhEE,EAAM,OAAO,OAAS,UAClBC,EAAQD,EAAM,OAAO,KAAK,EAC1BA,EAAM,OAAO,MAAM,gBAAkB,qBAErCA,EAAM,OAAO,MAAM,gBAAkB,sBAGzCA,EAAM,OAAO,OAAS,YAClBA,EAAM,OAAO,MAAM,KAAI,IAAO,GAC9BA,EAAM,OAAO,MAAM,gBAAkB,qBAErCA,EAAM,OAAO,MAAM,gBAAkB,qBAGjD,EACAH,EAAK,iBAAiB,QAASE,CAAW,EAI1C,GAAI,aAAa,QAAQ,qBAAqB,IAAM,KAAM,CACtD,IAAIG,EAAmB,CAAA,EACvB,GAAI,CACAA,EAAmB,KAAK,MAAM,aAAa,QAAQ,qBAAqB,CAAC,CAC5E,OACMC,EAAO,CACV,QAAQ,MAAM,cAAeA,EAAM,IAAI,EACvC,QAAQ,MAAM,iBAAkBA,EAAM,OAAO,CAChD,CACDL,EAAW,CAAE,GAAGA,EAAU,GAAGI,CAAgB,EAC7CL,EAAK,SAAS,MAAM,MAAQC,EAAS,OAAS,GAC9CD,EAAK,SAAS,QAAQ,MAAQC,EAAS,SAAW,EACtD,CAIA,SAASM,EAAUC,EAAW,CAC1B,MAAMC,EAAQ,SAAS,cAAc,QAAQ,EAC7CA,EAAM,UAAU,IAAI,MAAM,EAC1BA,EAAM,YAAcD,EACpB,WAAW,IAAMC,EAAM,UAAU,OAAO,MAAM,EAAG,GAAI,CACzD,CAIA,SAASC,GAAa,CAElB,MAAMC,EAAY,SAAS,cAAc,aAAa,EAEtDX,EAAK,iBAAiB,SAAUG,GAAS,CACrCA,EAAM,eAAc,EAEpB,GAAI,CAAE,MAAAS,EAAO,QAAAC,CAAS,EAAGZ,EAGzB,GAAI,CAACG,EAAQQ,CAAK,EAAG,CACjBL,EAAU,gBAAgB,EAC1B,MACH,CACD,GAAIM,EAAQ,KAAM,IAAK,GAAI,CACvBN,EAAU,kBAAkB,EAC5B,MACH,CAEDR,EAAQ,SAAS,kBAAmB,mBAAoBC,CAAI,EACvD,KAAK,IAAM,CACRO,EAAU,4BAA4B,EAGtCI,EAAU,IAAM,qCAChBA,EAAU,UAAU,IAAI,kBAAkB,EAC1C,WAAW,IAAM,CACbA,EAAU,IAAM,uCAChBA,EAAU,UAAU,OAAO,kBAAkB,CAChD,EAAE,GAAI,EAEP,QAAQ,IAAIV,CAAQ,EACpB,aAAa,WAAW,qBAAqB,EAC7C,OAAO,KAAKA,CAAQ,EAAE,QAAQa,GAAOb,EAASa,CAAG,EAAI,EAAE,EACvDd,EAAK,MAAK,CAC1B,CAAa,EACA,MAAM,IAAM,CACT,QAAQ,MAAM,wBAAyB,KAAK,EAC5CO,EAAU,wBAAwB,CAClD,CAAa,CACb,CAAK,CACL,CACAG,EAAU"}